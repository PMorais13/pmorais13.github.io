import{a as ie,b as ne,c as ae,d as oe,e as re,f as me,g as le,h as se,i as pe,j as ce,k as de}from"./chunk-ZYDK7AQ3.js";import{a as _e}from"./chunk-IDZ7U7LW.js";import{a as N,d as W,e as q}from"./chunk-5CRZFFKU.js";import"./chunk-53D4Q4VK.js";import"./chunk-YHPZIFDS.js";import"./chunk-UOP2MRXY.js";import{a as te}from"./chunk-GHZSMKUY.js";import"./chunk-QDXT4NTO.js";import{a as K}from"./chunk-SVXT45U7.js";import{a as fe}from"./chunk-V73ZXADK.js";import{b as Q,c as X}from"./chunk-S27XDV5K.js";import{a as F,f as L,g as H}from"./chunk-3RTCAAWZ.js";import"./chunk-E7XOTRJ6.js";import"./chunk-EBI4RQUP.js";import{j as V,n as j,q as k,t as z,y as U}from"./chunk-KONJ5OEV.js";import"./chunk-DI2HMTWA.js";import"./chunk-6XAAMA5M.js";import"./chunk-IMBPNYJZ.js";import"./chunk-NA4IISU4.js";import{a as Y,b as Z,c as ee}from"./chunk-5A3YSHED.js";import"./chunk-AZWIA2G5.js";import{Db as f,L as y,Mb as a,Md as G,Nb as o,Nd as J,Ob as _,Pb as u,Qb as C,Sb as P,T as E,Tc as $,Ub as w,Vb as x,Xc as A,_c as B,db as n,dc as T,ec as m,fc as p,gc as v,jb as g,nc as R,oa as S,pa as b,qb as I,qc as l,rc as s,s as M,t as h,tc as O,wa as D,wb as d}from"./chunk-YKXOHSBZ.js";var ve=()=>[];function ye(e,i){e&1&&(a(0,"th",13),m(1),l(2,"translate"),o()),e&2&&(n(),v(" ",s(2,1,"admin.name")," "))}function xe(e,i){if(e&1&&(a(0,"td",14),m(1),o()),e&2){let t=i.$implicit;n(),p(t.nome)}}function Me(e,i){e&1&&(a(0,"th",13),m(1),l(2,"translate"),o()),e&2&&(n(),v(" ",s(2,1,"employees.registration")," "))}function he(e,i){if(e&1&&(a(0,"td",14),m(1),o()),e&2){let t=i.$implicit;n(),p(t.matricula)}}function Ee(e,i){e&1&&(a(0,"th",13),m(1),l(2,"translate"),o()),e&2&&(n(),v(" ",s(2,1,"admin.access")," "))}function Se(e,i){if(e&1){let t=P();a(0,"td",14)(1,"mat-select",15),w("selectionChange",function(c){let Ce=S(t).$implicit,ge=x(2);return b(ge.updateAccess(Ce,c.value))}),a(2,"mat-option",16),m(3),l(4,"translate"),o(),a(5,"mat-option",17),m(6),l(7,"translate"),o(),a(8,"mat-option",18),m(9),l(10,"translate"),o()()()}e&2&&(n(3),p(s(4,3,"admin.roleEmployee")),n(3),p(s(7,5,"admin.roleCoordinator")),n(3),p(s(10,7,"admin.roleAdmin")))}function be(e,i){e&1&&_(0,"tr",19)}function De(e,i){e&1&&_(0,"tr",20)}function Ie(e,i){if(e&1&&(u(0),a(1,"mat-card")(2,"mat-card-title"),m(3),l(4,"translate"),o(),a(5,"mat-form-field",3)(6,"mat-label"),m(7),l(8,"translate"),o(),_(9,"input",4),o(),a(10,"table",5),l(11,"async"),u(12,6),d(13,ye,3,3,"th",7)(14,xe,2,1,"td",8),C(),u(15,9),d(16,Me,3,3,"th",7)(17,he,2,1,"td",8),C(),u(18,10),d(19,Ee,3,3,"th",7)(20,Se,11,9,"td",8),C(),d(21,be,1,0,"tr",11)(22,De,1,0,"tr",12),o()(),C()),e&2){let t,r=x();n(3),p(s(4,6,"admin.accessPermissions")),n(4),p(s(8,8,"admin.searchEmployee")),n(2),f("formControl",r.searchControl),n(),f("dataSource",(t=s(11,10,r.filteredEmployees$))!==null&&t!==void 0?t:R(12,ve)),n(11),f("matHeaderRowDef",r.displayedColumns),n(),f("matRowDefColumns",r.displayedColumns)}}function Pe(e,i){e&1&&(a(0,"div",21),_(1,"app-loader"),o())}var ue=class e{constructor(i,t,r){this.employeesService=i;this.adminData=t;this.destroyRef=r}searchControl=new k("");employees$;filteredEmployees$;displayedColumns=["nome","matricula","access"];isLoading=!0;ngOnInit(){this.adminData.loadEmployees().pipe(y()).subscribe(()=>this.isLoading=!1),this.employees$=this.adminData.employees$,this.filteredEmployees$=h([this.employees$,this.searchControl.valueChanges.pipe(E(""))]).pipe(M(([i,t])=>{let r=(t||"").toString().toLowerCase();return i.filter(c=>c.nome.toLowerCase().includes(r)||c.matricula.toString().toLowerCase().includes(r))}),K(this.destroyRef))}updateAccess(i,t){this.employeesService.updateEmployee(i.id,{access:{perfilAcesso:t}}).pipe(y()).subscribe()}static \u0275fac=function(t){return new(t||e)(g(te),g(_e),g(D))};static \u0275cmp=I({type:e,selectors:[["app-admin-permissions"]],decls:4,vars:2,consts:[["loading",""],[1,"tab-content"],[4,"ngIf","ngIfElse"],["appearance","outline",1,"search-field"],["matInput","",3,"formControl"],["mat-table","",1,"mat-elevation-z1",3,"dataSource"],["matColumnDef","nome"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","matricula"],["matColumnDef","access"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"selectionChange"],["value","funcionario"],["value","coordenador"],["value","admin"],["mat-header-row",""],["mat-row",""],[1,"loader"]],template:function(t,r){if(t&1&&(a(0,"div",1),d(1,Ie,23,13,"ng-container",2)(2,Pe,2,0,"ng-template",null,0,O),o()),t&2){let c=T(3);n(),f("ngIf",!r.isLoading)("ngIfElse",c)}},dependencies:[B,$,A,ee,Y,Z,de,ie,ae,le,oe,ne,se,re,me,pe,ce,q,L,F,W,N,H,X,Q,U,V,j,z,J,G,fe],styles:["[_nghost-%COMP%]{display:block}.tab-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}mat-card-title[_ngcontent-%COMP%]{margin-bottom:1rem;font-weight:700}mat-card[_ngcontent-%COMP%]{margin-bottom:1rem;padding:1rem}.search-field[_ngcontent-%COMP%]{width:100%}.loader[_ngcontent-%COMP%]{margin-top:2rem}"]})};export{ue as PermissionsComponent};
