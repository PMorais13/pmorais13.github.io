import{a as F,e as a,f as d,g as s}from"./chunk-EBI4RQUP.js";import{Dc as m,Ea as p,L as l,_ as i,da as I,ea as c,k as b}from"./chunk-YKXOHSBZ.js";var n=class r{constructor(t){this.http=t}API_URL=a()?`${d()}/favorites`:s("favorites");getFavorites(){return this.http.get(this.API_URL)}addFavorite(t){return a()?this.http.post(this.API_URL,t):this.http.get(s("favorites"))}updateFavorites(t){return a()?this.http.put(this.API_URL,t):this.http.get(s("favorites"))}static \u0275fac=function(e){return new(e||r)(I(F))};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};var v=class r{favoritesSubject=new b(null);favorites$=this.favoritesSubject.asObservable();setFavorites(t){this.favoritesSubject.next(t)}getFavorites(){return this.favoritesSubject.value}static \u0275fac=function(e){return new(e||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};var g=class r{favoritesSignal=p([]);currentItemSignal=p(null);storage=c(v);api=c(n);list=m(()=>this.favoritesSignal());current=m(()=>this.currentItemSignal());constructor(){let t=this.storage.getFavorites();t?this.favoritesSignal.set(t):this.api.getFavorites().pipe(l()).subscribe(e=>{this.storage.setFavorites(e),this.favoritesSignal.set(e)}),this.storage.favorites$.subscribe(e=>{e&&this.favoritesSignal.set(e)})}setCurrentItem(t){this.currentItemSignal.set(t)}toggleFavorite(t){let e=this.favoritesSignal(),f=e.findIndex(u=>u.route===t.route),o;f>-1?o=e.filter((u,S)=>S!==f):o=[...e,t],this.favoritesSignal.set(o),this.storage.setFavorites(o),this.api.updateFavorites(o).pipe(l()).subscribe()}isFavorite(t){return this.favoritesSignal().some(e=>e.route===t)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};export{g as a};
